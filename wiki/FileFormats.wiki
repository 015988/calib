#summary Format definition for the used files
#labels Featured,Phase-Design

<wiki:toc max_depth="2" />

= File Format definitions =

==.dat==
Used to store 2D points in multiple frames.
Each line represents a frame.
A dat with N points and M frames must look like:
----
0 x,,01,, y,,01,, x,,02,, y,,02,, ... x,,0N,, y,,0N,,

...

M-1 x,,M1,, y,,M1,, x,,M2,, y,,M2,, ... x,,MN,, y,,MN,,
----

*Important*: The .dat files used for calibration may contain measures from different frames, but one measure for each point. *Do not* measure the same calibration point in two different frames.

==.ref==
Used to store 3D points, usually containing the reference for calibration.
A ref with N points must look like:
----
0 X,,0,, Y,,0,, Z,,0,,

...

N-1 X,,N,, Y,,N,, Z,,N,,
----

Preferably, the Z axis should be vertical.

==.cal==
The .cal must follow the dvideo format:
Code snippet

{{{
    dvideo=fopen([name '.cal'],'w');
    Pn=stack_matrix(calib.P);
    Pd=Pn/Pn(12);
    fprintf(dvideo,'%6.6g ',Pd(1));
    fprintf(dvideo,'%6.6g ',Pd(5));
    fprintf(dvideo,'%6.6g ',Pd(9));
    fprintf(dvideo,'%6.6g ',Pd(2));
    fprintf(dvideo,'%6.6g ',Pd(6));    
    fprintf(dvideo,'%6.6g ',Pd(10));
    fprintf(dvideo,'%6.6g ',Pd(3));
    fprintf(dvideo,'%6.6g ',Pd(7));
    fprintf(dvideo,'%6.6g ',Pd(11));
    fprintf(dvideo,'%6.6g ',Pd(4));
    fprintf(dvideo,'%6.6g ',Pd(8));

    fclose(dvideo);
}}}

==.clb==
Each item in separated lines:
  # KK matrix: fprintf(f,'%e ',calib.KK');
  # RT matrix: fprintf(f,'%e ',calib.RT');
  # Direct model coeff: fprintf(f,'%e %e\n',calib.dir.k(1),calib.dir.k(2));
  # Direct model coeff: fprintf(f,'%e %e\n',calib.dir.p(1),calib.dir.p(2));
  # Direct model coeff: fprintf(f,'%e %e\n',calib.dir.s(1),calib.dir.s(2));
  # Inverse model coeff: fprintf(f,'%e %e\n',calib.inv.k(1),calib.inv.k(2));
  # Inverse model coeff: fprintf(f,'%e %e\n',calib.inv.p(1),calib.inv.p(2));
  # Inverse model coeff: fprintf(f,'%e %e\n',calib.inv.s(1),calib.inv.s(2));